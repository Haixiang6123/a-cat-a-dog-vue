(function(e){function t(t){for(var n,i,o=t[0],c=t[1],u=t[2],d=0,p=[];d<o.length;d++)i=o[d],r[i]&&p.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},s=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/a-cat-a-dog-vue/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"09e1":function(e,t,a){},"24e5":function(e,t,a){},2665:function(e,t,a){},"30d9":function(e,t,a){"use strict";var n=a("3a94"),r=a.n(n);r.a},"3a94":function(e,t,a){},"3df3":function(e,t,a){"use strict";var n=a("2665"),r=a.n(n);r.a},"4c06":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-card",{staticClass:"app-wrapper"},[a("router-view")],1)],1)},s=[],i={name:"App"},o=i,c=(a("5c0b"),a("2877")),u=Object(c["a"])(o,r,s,!1,null,null,null),l=u.exports,d=a("8c4f"),p=(a("c5f6"),function(e){var t=e.labels.map(function(e){return{value:Number(e.Confidence.toFixed(2)),name:e.Name}});return{title:{text:"Image Analysis",subtext:"ID: ".concat(e.image_id),x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"Confidence",type:"pie",radius:"55%",center:["50%","60%"],data:t,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}),f=function(e){var t=new Date(e);return"".concat(t.getMonth()+1,"-").concat(t.getDate(),"-").concat(t.getFullYear()-2e3)},m=function(){var e=localStorage.getItem("user");if(!e)return!1;var t=JSON.parse(e);return Boolean(t.subId&&t.type)};function g(){var e={subId:"",type:"CAT"},t=localStorage.getItem("user");if(!t)return e;var a=JSON.parse(t);return a.subId&&a.type?a:e}var h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("Header"),a("div",{staticClass:"home-image-wrapper"},[a("img",{staticClass:"home-image",attrs:{src:e.images[0].url,alt:"image"}})]),a("div",{staticClass:"home-actions"},[a("el-button",{staticClass:"vote-button",attrs:{icon:"el-icon-caret-top",circle:""},on:{click:e.vote}}),a("label",{attrs:{for:"new-file"}},[a("input",{ref:"newFileUpload",staticStyle:{display:"none"},attrs:{id:"new-file",accept:"image/*",type:"file"},on:{change:e.onChangeImage}}),a("el-button",{staticClass:"upload-button",attrs:{size:"small",icon:"el-icon-upload",circle:""},on:{click:e.onClickUpload}})],1),a("el-button",{staticClass:"favourite-button",attrs:{icon:"el-icon-star-on",circle:""},on:{click:e.favourite}}),a("el-button",{staticClass:"analyze-button",attrs:{size:"small",icon:"el-icon-info",circle:""},on:{click:e.toggleAnalysis}}),a("el-button",{staticClass:"next-button",attrs:{icon:"el-icon-refresh",circle:""},on:{click:e.updateImage}})],1),e.isShowAnalysis?a("Analysis",{attrs:{imageAnalysis:e.imageAnalysis[0]}}):e._e()],1)},v=[],b=(a("6b54"),a("f559"),a("96cf"),a("1da1")),y=a("be94"),w=a("2f62"),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"header"},[a("el-dropdown",{attrs:{placement:"bottom-start",trigger:"click"}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-mobile-phone header-icon"})]),a("el-dropdown-menu",[a("el-dropdown-item",[e._v("\n                "+e._s(e.user.subId)+"\n            ")])],1)],1),a("el-button",{on:{click:e.linkHome}},[e._v("üê±Aüê∂")]),a("el-dropdown",{staticClass:"header-setting-menu",attrs:{trigger:"click"}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-setting header-icon"})]),a("el-dropdown-menu",{attrs:{placement:"bottom-end"}},[a("el-dropdown-item",[a("router-link",{staticClass:"menu-link",attrs:{to:"/setting"}},[e._v("My Setting")])],1),a("el-dropdown-item",[a("router-link",{staticClass:"menu-link",attrs:{to:"/votes"}},[e._v("Voted Images")])],1),a("el-dropdown-item",[a("router-link",{staticClass:"menu-link",attrs:{to:"/favourites"}},[e._v("Favourite Images")])],1)],1)],1)],1)},_=[],C={name:"Header",computed:Object(y["a"])({},Object(w["c"])(["user"])),methods:{linkHome:function(){this.$router.push("/")}}},I=C,O=(a("829d"),Object(c["a"])(I,x,_,!1,null,"e186f45a",null)),k=O.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"analysis"},[a("div",{staticStyle:{height:"300px"},attrs:{id:"analysis-pie"}}),a("p",{staticStyle:{"margin-bottom":"12px"}},[a("strong",[e._v("Vendor: ")]),e._v(e._s(e.imageAnalysis.vendor))]),a("p",[a("strong",[e._v("Created At: ")]),e._v(e._s(e.formatDate(e.imageAnalysis.created_at)))])])},S=[],F=a("313e"),A=a.n(F),D={name:"Analysis",props:{imageAnalysis:{type:Object,default:function(){return{vendor:"",created_at:"",labels:[]}}}},mounted:function(){this.drawPie()},updated:function(){this.drawPie()},methods:{formatDate:f,getEChartOptions:p,drawPie:function(){var e=document.querySelector("#analysis-pie");if(e){var t=A.a.init(e),a=this.getEChartOptions(this.imageAnalysis);t.setOption(a)}}}},R=D,$=(a("c145"),Object(c["a"])(R,j,S,!1,null,"0928a092",null)),V=$.exports,T=a("bc3a"),U=a.n(T),E="416848bd-ea2f-4d38-a329-0e858ab5cd38",H="89e98203-1b5b-4c32-a67b-e314bf19f4c5",W=U.a.create({baseURL:"https://api.thecatapi.com/v1",headers:{"x-api-key":E}}),P=U.a.create({baseURL:"https://api.thedogapi.com/v1",headers:{"x-api-key":H}});n["default"].use(w["a"]);var z={CAT:W,DOG:P},B=g(),N=new w["a"].Store({state:{axios:z[B.type],user:B},getters:{},mutations:{updateAxios:function(e,t){e.axios=z[t]},updateUser:function(e,t){e.user=t}}}),G=N.state.axios;N.subscribe(function(){G=N.state.axios});var J={getImages:function(e){return G.get("/images/search",{params:e}).then(function(e){return e.data})},getImageById:function(e){return G.get("/images/".concat(e)).then(function(e){return e.data})},getUploadedImages:function(e){return G.get("/images",{params:e}).then(function(e){return e.data})},uploadImage:function(e){return G.post("/images/upload",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e}).catch(function(e){return e.response})},deleteImage:function(e){return G.delete("/images/".concat(e)).then(function(e){return e.data})},analyzeImage:function(e){return G.get("/images/".concat(e,"/analysis")).then(function(e){return e.data})}},M=N.state.axios;N.subscribe(function(){M=N.state.axios});var q={getFavourites:function(e){return M.get("/favourites",{params:e}).then(function(e){return e.data})},getFavouriteById:function(e){return M.get("/favourites/".concat(e)).then(function(e){return e.data})},addFavourite:function(e){return M.post("/favourites",e).then(function(e){return e.data})},deleteFavourite:function(e){return M.delete("/favourites/".concat(e)).then(function(e){return e.data})}},L=N.state.axios;N.subscribe(function(){L=N.state.axios});var X={getVotes:function(e){return L.get("/votes",{params:e}).then(function(e){return e.data})},getVoteById:function(e){return L.get("/votes/".concat(e)).then(function(e){return e.data})},addVote:function(e){return L.post("/votes",e).then(function(e){return e.data})},deleteVote:function(e){return L.delete("/votes/".concat(e)).then(function(e){return e.data})}},Y={name:"home",data:function(){return{images:[{url:""}],imageAnalysis:[],isShowAnalysis:!1}},computed:Object(y["a"])({},Object(w["c"])(["user"])),mounted:function(){this.updateImage()},methods:{updateImage:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.getImages();case 2:return t=e.sent,e.next=5,this.analyze(t);case 5:a=e.sent,this.images=t,this.imageAnalysis=a;case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),vote:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X.addVote({sub_id:this.user.subId,image_id:this.images[0].id,value:1});case 2:this.$message.success("Voted it");case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),favourite:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q.addFavourite({sub_id:this.user.subId,image_id:this.images[0].id});case 2:this.$message.success("Added to favourite");case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),analyze:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,J.analyzeImage(t[0].id);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),toggleAnalysis:function(){this.isShowAnalysis=!this.isShowAnalysis},onChangeImage:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("sub_id",this.user.subId),a.append("file",t.target.files[0]),e.next=5,J.uploadImage(a);case 5:n=e.sent,n.status.toString().startsWith("2")?this.$message.success("Upload successfully"):this.$message.error(n.data.message);case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),onClickUpload:function(){this.$refs.newFileUpload.click()}},components:{Header:k,Analysis:V}},K=Y,Q=(a("3df3"),Object(c["a"])(K,h,v,!1,null,"0ba32f22",null)),Z=Q.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"registerForm",staticClass:"register",attrs:{model:e.registerForm,rules:e.rules}},[a("img",{staticClass:"register-avatar",attrs:{src:"https://i.loli.net/2019/03/30/5c9efda85ee97.jpg",alt:"avatar"}}),a("section",{staticClass:"register-subId"},[a("el-form-item",{attrs:{prop:"subId"}},[a("el-input",{attrs:{placeholder:"User Name"},model:{value:e.registerForm.subId,callback:function(t){e.$set(e.registerForm,"subId",t)},expression:"registerForm.subId"}})],1)],1),a("section",{staticClass:"register-type"},[a("p",[e._v("I prefer...")]),a("el-form-item",{attrs:{prop:"type"}},[a("el-radio",{attrs:{label:"CAT"},model:{value:e.registerForm.type,callback:function(t){e.$set(e.registerForm,"type",t)},expression:"registerForm.type"}},[e._v("CAT")]),a("el-radio",{attrs:{label:"DOG"},model:{value:e.registerForm.type,callback:function(t){e.$set(e.registerForm,"type",t)},expression:"registerForm.type"}},[e._v("DOG")])],1)],1),a("section",[a("el-button",{staticClass:"register-button",attrs:{type:"primary"},on:{click:e.register}},[e._v("GET STARTED")])],1)])},te=[],ae={name:"Register",data:function(){return{registerForm:{subId:"",type:"CAT"},rules:{subId:[{required:!0,message:"User name can' be empty"}],type:[{required:!0,message:"Type can' be empty"}]}}},methods:Object(y["a"])({register:function(){var e=this;this.$refs.registerForm.validate(function(t){if(!t)return e.$message.error("Something wrong with registration form"),!1;var a=e.registerForm;localStorage.setItem("user",JSON.stringify(a)),e.updateUser(a),e.updateAxios(a.type),e.$message.success("Howa"),e.$router.push("/")})}},Object(w["b"])(["updateUser","updateAxios"]))},ne=ae,re=(a("905d"),Object(c["a"])(ne,ee,te,!1,null,"1daf228f",null)),se=re.exports,ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setting"},[a("Header"),a("h3",[e._v("Which one would you prefer?")]),a("section",{staticClass:"setting-type"},[a("el-radio",{staticClass:"setting-type-radio",attrs:{label:"CAT"},on:{change:e.onChangeType},model:{value:e.user.type,callback:function(t){e.$set(e.user,"type",t)},expression:"user.type"}},[e._v("CAT")]),a("el-radio",{staticClass:"setting-type-radio",attrs:{label:"DOG"},on:{change:e.onChangeType},model:{value:e.user.type,callback:function(t){e.$set(e.user,"type",t)},expression:"user.type"}},[e._v("DOG")])],1)],1)},oe=[],ce={name:"Setting",computed:Object(y["a"])({},Object(w["c"])(["user"])),methods:Object(y["a"])({onChangeType:function(e){var t=Object(y["a"])({type:e},this.user);localStorage.setItem("user",JSON.stringify(t)),this.updateUser(t),this.updateAxios(e)}},Object(w["b"])(["updateAxios","updateUser"])),components:{Header:k}},ue=ce,le=(a("30d9"),Object(c["a"])(ue,ie,oe,!1,null,"06f313eb",null)),de=le.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"votes"},[a("Header"),a("h3",[e._v("Voted Images")]),a("div",{staticClass:"image-list"},e._l(e.imagesWithVote,function(t){return a("div",{key:t.id,staticClass:"image-item"},[a("el-card",{staticClass:"image-wrapper"},[a("img",{staticClass:"image",attrs:{src:t.url,alt:"Image"}}),a("div",{staticStyle:{padding:"14px"}},[a("div",{staticClass:"image-action clearfix"},[a("time",{staticClass:"time"},[e._v(e._s(e.formatDate(t.vote.created_at)))]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",plain:""},on:{click:function(a){return e.deletingVote(t.vote.id)}}})],1)])])],1)}),0),a("el-dialog",{attrs:{title:"Removing",visible:e.isShowDialog,width:"240px","before-close":e.closeDialog},on:{"update:visible":function(t){e.isShowDialog=t}}},[a("span",[e._v("Sure to remove?")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.deleteVote}},[e._v("Remove")]),a("el-button",{attrs:{type:"default"},on:{click:e.closeDialog}},[e._v("Cancel")])],1)])],1)},fe=[],me={name:"Votes",data:function(){return{imagesWithVote:[],deletingVoteId:"",isShowDialog:!1}},computed:Object(y["a"])({},Object(w["c"])(["user"])),mounted:function(){this.fetchImages()},methods:{formatDate:f,closeDialog:function(){this.isShowDialog=!1},fetchImages:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X.getVotes({sub_id:this.user.subId});case 2:t=e.sent,a=[],n=0;case 5:if(!(n<t.length)){e.next=14;break}return e.next=8,J.getImageById(t[n].image_id);case 8:r=e.sent,s=Object(y["a"])({},r,{vote:t[n]}),a.push(s);case 11:n++,e.next=5;break;case 14:this.imagesWithVote=a;case 15:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deletingVote:function(e){this.deletingVoteId=e,this.isShowDialog=!0},deleteVote:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.imagesWithVote=this.imagesWithVote.filter(function(e){return e.vote.id!==t.deletingVoteId}),e.next=3,X.deleteVote(this.deletingVoteId);case 3:this.isShowDialog=!1,this.$message.success("Remove successfully");case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},components:{Header:k}},ge=me,he=(a("5fe2"),Object(c["a"])(ge,pe,fe,!1,null,"2d611584",null)),ve=he.exports,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"favourites"},[a("Header"),a("h3",[e._v("Favourite Images")]),a("div",{staticClass:"image-list"},e._l(e.imagesWithFavourite,function(t){return a("div",{key:t.id,staticClass:"image-item",attrs:{span:12}},[a("el-card",{staticClass:"image-wrapper"},[a("img",{staticClass:"image",attrs:{src:t.url,alt:"Image"}}),a("div",{staticStyle:{padding:"14px"}},[a("div",{staticClass:"image-action clearfix"},[a("time",{staticClass:"time"},[e._v(e._s(e.formatDate(t.favourite.created_at)))]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",plain:""},on:{click:function(a){return e.deletingFavourite(t.favourite.id)}}})],1)])])],1)}),0),a("el-dialog",{attrs:{title:"Removing",visible:e.isShowDialog,width:"240px","before-close":e.closeDialog},on:{"update:visible":function(t){e.isShowDialog=t}}},[a("span",[e._v("Sure to remove?")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.deleteFavourite}},[e._v("Remove")]),a("el-button",{attrs:{type:"default"},on:{click:e.closeDialog}},[e._v("Cancel")])],1)])],1)},ye=[],we={name:"Favourites",data:function(){return{imagesWithFavourite:[],deletingFavouriteId:"",isShowDialog:!1}},computed:Object(y["a"])({},Object(w["c"])(["user"])),mounted:function(){this.fetchImages()},methods:{formatDate:f,closeDialog:function(){this.isShowDialog=!1},fetchImages:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q.getFavourites({sub_id:this.user.subId});case 2:t=e.sent,a=[],n=0;case 5:if(!(n<t.length)){e.next=14;break}return e.next=8,J.getImageById(t[n].image_id);case 8:r=e.sent,s=Object(y["a"])({},r,{favourite:t[n]}),a.push(s);case 11:n++,e.next=5;break;case 14:this.imagesWithFavourite=a;case 15:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deletingFavourite:function(e){this.deletingFavouriteId=e,this.isShowDialog=!0},deleteFavourite:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.imagesWithFavourite=this.imagesWithFavourite.filter(function(e){return e.favourite.id!==t.deletingFavouriteId}),e.next=3,q.deleteFavourite(this.deletingFavouriteId);case 3:this.isShowDialog=!1,this.$message.success("Remove successfully");case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},components:{Header:k}},xe=we,_e=(a("7620"),Object(c["a"])(xe,be,ye,!1,null,"03bcafbc",null)),Ce=_e.exports;n["default"].use(d["a"]);var Ie=new d["a"]({routes:[{path:"/",name:"home",component:Z},{path:"/register",name:"register",component:se},{path:"/votes",name:"votes",component:ve},{path:"/favourites",name:"favourites",component:Ce},{path:"/setting",name:"setting",component:de}]});Ie.beforeEach(function(e,t,a){m()||"/register"===e.path?a():a("/register")});var Oe=Ie,ke=a("5c96"),je=a.n(ke);a("0fae");n["default"].use(je.a),n["default"].config.productionTip=!1,new n["default"]({router:Oe,store:N,render:function(e){return e(l)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var n=a("5e27"),r=a.n(n);r.a},"5e27":function(e,t,a){},"5fe2":function(e,t,a){"use strict";var n=a("816d"),r=a.n(n);r.a},"6bad":function(e,t,a){},7620:function(e,t,a){"use strict";var n=a("09e1"),r=a.n(n);r.a},"816d":function(e,t,a){},"829d":function(e,t,a){"use strict";var n=a("24e5"),r=a.n(n);r.a},"905d":function(e,t,a){"use strict";var n=a("4c06"),r=a.n(n);r.a},c145:function(e,t,a){"use strict";var n=a("6bad"),r=a.n(n);r.a}});
//# sourceMappingURL=app.e0e8ac83.js.map